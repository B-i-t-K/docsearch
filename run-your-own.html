<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie-edge"><title>Run your own</title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The easiest way to add search to your documentation"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@Algolia"><meta name="twitter:creator" content="@Algolia"><meta property="og:url" content="https://community.algolia.com/docsearch"><meta property="og:title" content="Run your own"><meta property="og:description" content="The easiest way to add search to your documentation"><meta property="og:image" content="https://community.algolia.com/docsearch/assets/og_image.png"><link rel="shortcut icon" href="./favicon.ico"><link rel="icon" type="image/x-icon" sizes="16x16 32x32" href="favicon.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,600|Poppins:700" rel="stylesheet"><link type="text/css" rel="stylesheet" href="./style.css"><link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"><link type="text/css" rel="stylesheet" href="https://unpkg.com/@glidejs/glide@3.2.3/dist/css/glide.core.min.css"><body class="hind text-telluric bg-white"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N8JP8G" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="header fixed pin-t w-100 h-3 z-5 bg-white-pure"><div class="max-w-xl m-auto h-100 flex flrnw"><div class="hidden sm_flex fln flcnw flc"><a class="cursor-pointer text-0 pl-2" href="https://www.algolia.com/" target="_blank"><img class="h-1 sm_h-1x" src="assets/algolia-logo.svg" alt="Algolia"></a></div><div class="hidden sm_flex fln flrnw flc"><div class="w-1 h-1 sm_w-1x sm_h-1x text-telluric fill-current"><svg height="100%" width="100%" viewBox="0 0 18 35" xmlns="http://www.w3.org/2000/svg">
  <path d="M1.8537 34.7643l15.5597-17.268L1.8537 0H0l15.5597 17.4964L0 34.7644z" fill-rule="evenodd"></path>
</svg>
</div></div><div class="hidden lg_flex custom-community-link fln flcnw flc px-0x relative"><a class="cursor-pointer text-0" href="https://community.algolia.com/" target="_blank"><img class="h-1 sm_h-1x lg_h-2" src="assets/community/community-logo.svg" alt="Algolia Community"></a><div class="custom-community-projects hidden sm_block absolute z-5 pin-t mt-3 ml-3 border border-proton rounded-auto bg-white-pure shadow-1"><div class="flex flrw pt-0x"><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/talksearch/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/talksearch-icon.svg" alt="TalkSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">TalkSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/jekyll-algolia/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/jekyll-icon.svg" alt="Jekyll"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">Jekyll</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/instantsearch.js/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/instantsearch-icon.svg" alt="InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">InstantSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/react-instantsearch/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/react-icon.svg" alt="React InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">React InstantSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/vue-instantsearch/"><div class="fln bg-blue rounded-auto w-2x h-2x"><img class="w-100" src="assets/community/vue-icon.svg" alt="Vue InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">Vue InstantSearch</div></a><a class="fln w-50 flex flrnw p-05 flc hover_no-underline" href="https://community.algolia.com/angular-instantsearch/"><div class="fln bg-blue rounded-auto w-2x h-2x flex flrnw flc"><img class="w-80" src="assets/community/angular-icon.svg" alt="Angular InstantSearch"></div><div class="fla pl-1 text-solstice text-1 bold hover_text-nebula">Angular InstantSearch</div></a><a class="fla flex flrnw p-0x flc text-2 text-solstice bold bg-moon rounded-auto py-1" href="https://discourse.algolia.com/">Community Forum</a></div></div></div><div class="hidden lg_flex fln flrnw flc"><div class="w-1 h-1 sm_w-1x sm_h-1x text-telluric fill-current"><svg height="100%" width="100%" viewBox="0 0 18 35" xmlns="http://www.w3.org/2000/svg">
  <path d="M1.8537 34.7643l15.5597-17.268L1.8537 0H0l15.5597 17.4964L0 34.7644z" fill-rule="evenodd"></path>
</svg>
</div></div><div class="flex fln flrnw flc pl-1 sm_pl-0"><a class="cursor-pointer uppercase tracking-poppins poppins text-solstice hover_text-nebula hover_no-underline" href="./"><span class="hidden sm_block ml-0x">DocSearch</span><img class="align-text-bottom h-100 sm_hidden ml-1" src="assets/docsearch-mark.svg" width="40" alt="DocSearch logo"></a></div><div class="flex fla flrnw flrcv flrar ml-2"><div class="w-100 flrnw flex flrar"><div class="custom-search-wrapper fln h-60 w-100 rounded-auto relative"><label class="absolute pin-left z-1 w-1 h-100 ml-05 text-solstice fill-current cursor-pointer" for="docsearch"><svg height="100%" viewBox="0 0 15 15" width="100%" xmlns="http://www.w3.org/2000/svg">
  <path d="M10.052 10.88c-1.1.91-2.483 1.406-3.91 1.403C2.75 12.283 0 9.533 0 6.14 0 2.75 2.75 0 6.142 0c3.392 0 6.14 2.75 6.14 6.142 0 1.485-.526 2.847-1.403 3.91l3.95 3.95c.227.227.228.596-.002.826-.228.227-.597.228-.826 0l-3.95-3.95zm-3.91.234c2.745 0 4.972-2.227 4.972-4.972 0-2.747-2.227-4.972-4.972-4.972-2.747 0-4.972 2.225-4.972 4.972 0 2.745 2.225 4.972 4.972 4.972z" fill-rule="evenodd"></path>
</svg>
</label><input class="custom-search-input w-100 h-2x leading-h-2x outline-none text-solstice pl-2 rounded-auto bg-moon focus_bg-moon--1" id="docsearch" placeholder="Search the docs..."></div></div></div><div class="hidden md_flex justify-start items-center mx-1"><a class="h-1x w-1x text-solstice fill-current items-center hover_text-grey-darker mr-1" href="https://github.com/algolia/docsearch" target="_blank"><svg viewBox="0 0 40 39" xmlns="http://www.w3.org/2000/svg">
  <path d="M19.998 0C8.955 0 0 8.954 0 20c0 8.837 5.73 16.333 13.678 18.977 1 .184 1.365-.433 1.365-.964 0-.475-.017-1.732-.027-3.4C9.453 35.82 8.28 31.93 8.28 31.93c-.91-2.31-2.222-2.925-2.222-2.925-1.816-1.24.137-1.215.137-1.215 2.008.14 3.064 2.06 3.064 2.06 1.783 3.057 4.68 2.174 5.82 1.662.18-1.29.698-2.173 1.27-2.673-4.442-.505-9.11-2.222-9.11-9.885 0-2.183.78-3.97 2.058-5.367-.206-.506-.893-2.54.196-5.293 0 0 1.68-.538 5.5 2.05A19.156 19.156 0 0 1 20 9.67c1.7.01 3.41.23 5.008.675 3.818-2.588 5.494-2.05 5.494-2.05 1.09 2.753.405 4.787.2 5.293 1.282 1.397 2.055 3.184 2.055 5.367 0 7.683-4.676 9.374-9.13 9.868.716.618 1.356 1.838 1.356 3.703 0 2.675-.025 4.832-.025 5.487 0 .536.36 1.158 1.376.963C34.274 36.326 40 28.836 40 20 40 8.955 31.045 0 19.998 0" />
</svg>
</a></div><div class="md_hidden flex justify-start items-center mx-2"><button class="custom-toggle-nav text-solstice items-center hover_text-grey-darker focus_outline-none"><svg class="align-text-bottom navigation-open h-1x w-1x fill-current" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg><svg class="align-text-bottom navigation-close hidden h-1x w-1x fill-current" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"></path></svg></button></div></div></div><div class="mt-3"><div class="bgtb-moon-white-pure relative"><div class="md_flex max-w-lg m-auto"><div class="navigation-sidebar sticky pin-t top-3 h-100vh-3 overflow-y-auto hidden md_block bg-white pl-1"><!-- Adding subsections from markdown--><div class="pt-2 w-5 m-auto sm_flex sm_w-90 md_block md_w-100"><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Getting Started</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="what-is-docsearch.html">What is DocSearch?</a></li><li><a class="block py-0x text-solstice" href="how-does-it-work.html">How Does It Work?</a></li><li><a class="block py-0x text-solstice" href="who-can-apply.html">Who Can Apply?</a></li><li><a class="block py-0x text-solstice" href="apply.html">Apply Now!</a></li></ul></div><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Adding DocSearch To Your UI</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="dropdown.html">Dropdown UI Overview</a></li><li><a class="block py-0x text-solstice" href="styling.html">Styling</a></li><li><a class="block py-0x text-solstice" href="behavior.html">Behavior</a></li></ul></div><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Requirements, Tips, FAQ</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="required-configuration.html">Required configuration</a></li><li><a class="block py-0x text-solstice" href="tips.html">Tips</a></li><li><a class="block py-0x text-solstice" href="faq.html">FAQ</a></li><li><a class="block py-0x text-solstice" href="integrations.html">Website Generators</a></li></ul></div><div class="flcnw flspa sm_flex-auto sm_w-33 sm_p-1 md_w-100 md_p-0"><div class="category text-nebula poppins uppercase mb-05x text-1x">Let’s Get Technical</div><ul class="list-reset mb-2"><li><a class="block py-0x text-solstice" href="crawler-overview.html">DocSearch Technical Overview (the Crawler)</a></li><li><a class="block py-0x text-solstice" href="inside-the-engine.html">Inside The Engine</a></li><li><a class="block py-0x text-solstice" href="config-file.html">Config Files</a></li><li><a class="block py-0x text-solstice" href="css-helper.html">CSS Helper</a></li><li><a class="block py-0x text-solstice" href="how-do-we-build-an-index.html">Build An Index</a></li><li><a class="block py-0x current-page text-nebula" href="run-your-own.html">Run Your Own</a><ul class="list-reset pl-1 text-1"><li><a class="block py-0x text-telluric" href="run-your-own.html#set-up-your-environment">Set up your environment </a></li><li><a class="block py-0x text-telluric" href="run-your-own.html#run-the-crawl-from-the-docker-image">Run the crawl from the Docker image </a></li><li><a class="block py-0x text-telluric" href="run-your-own.html#running-the-crawler-from-the-code-base">Running the crawler from the code base </a></li><li><a class="block py-0x text-telluric" href="run-your-own.html#create-a-new-configuration">Create a new configuration </a></li><li><a class="block py-0x text-telluric" href="run-your-own.html#testing-your-results">Testing your results </a></li><li><a class="block py-0x text-telluric" href="run-your-own.html#integration">Integration </a></li><li><a class="block py-0x text-telluric" href="run-your-own.html#help">Help </a></li></ul></li></ul></div></div></div><div class="documentation-content text-2 pt-2 pb-1 px-2 w_100 md_w-75"><div class="md_hidden mb-1"><a href="https://community.algolia.com/docsearch">DocSearch</a><span>&nbsp;>&nbsp;</span><a href="https://community.algolia.com/docsearch/what-is-docsearch.html">Documentation</a></div><h1 class="custom-main-title text-5 lg_text-7 uppercase tracking-poppins text-solstice bold mb-2">Run your own</h1><p>The version of DocSearch we offer for free is hosted on our own servers, running
every 24 hours. You do not need to think about the crawl. However if you want to
update your results with more control, or if you are <a href="./who-can-apply.html">not compliant with our
checklist</a>, or if your website sits behind a firewall, you might want to run
the crawler yourself.</p>
<p>The whole code base of DocSearch is open source, and we package it as a Docker
image to make this even easier for you to use.</p>
<h2 id="set-up-your-environment">Set up your environment <a class="anchor" href="#set-up-your-environment" aria-hidden="true"></a></h2>
<p>You'll need to set your Algolia application ID and admin API key as environment
variables. If you don't have an Algolia account, you need to <a href="https://www.algolia.com/pricing">create one</a>.</p>
<ul>
<li>
<p><code>APPLICATION_ID</code> set to your Algolia Application ID</p>
</li>
<li>
<p><code>API_KEY</code> set to your API Key. Make sure to use an API key with <strong>write</strong>
access to your index. <a href="https://www.algolia.com/doc/guides/security/api-keys/#acl">The ACL <code>addObject</code>, <code>editSettings</code> and
<code>deleteIndex</code></a> must be allowed to this key.</p>
</li>
</ul>
<p>For convenience, you can create a <code>.env</code> file in the repository root.</p>
<pre><code class="hljs language-sh">APPLICATION_ID=YOUR_APP_ID
API_KEY=YOUR_API_KEY
</code></pre>
<h2 id="run-the-crawl-from-the-docker-image">Run the crawl from the Docker image <a class="anchor" href="#run-the-crawl-from-the-docker-image" aria-hidden="true"></a></h2>
<p>You can run a crawl from the packaged Docker image to crawl your website. You
will need to <a href="https://github.com/stedolan/jq/wiki/Installation">install jq, a lightweight command-line JSON processor</a></p>
<p>Then you only need to start the crawl according to your configuration. You
should check the <a href="./config-file.html">dedicated configuration documentation</a>.</p>
<pre><code class="hljs language-sh">docker run -it --env-file=.env -e <span class="hljs-string">"CONFIG=<span class="hljs-variable">$(cat /path/to/your/config.json | jq -r tostring)</span>"</span> algolia/docsearch-scraper
</code></pre>
<p>Once the crawl is done, you can <a href="#integration">jump to the Integration step</a>.</p>
<h2 id="running-the-crawler-from-the-code-base">Running the crawler from the code base <a class="anchor" href="#running-the-crawler-from-the-code-base" aria-hidden="true"></a></h2>
<h3 id="installation">Installation <a class="anchor" href="#installation" aria-hidden="true"></a></h3>
<p>The scraper is a python tool <a href="https://scrapy.org/">based on scrapy</a>. We do recommend to use
<a href="https://github.com/pypa/pipenv">pipenv</a> to install the python environment.</p>
<ul>
<li><a href="https://github.com/algolia/docsearch-scraper">Clone the scraper repository</a>.</li>
<li><a href="https://pipenv.readthedocs.io/en/latest/install/#installing-pipenv">Install pipenv</a></li>
<li><code>pipenv install</code></li>
<li><code>pipenv shell</code></li>
</ul>
<p>If you plan to use the browser emulation <a href="./config-file.html#js_render-optional">(<code>js_render</code> set to true)</a>, you
need to follow this extra step. If you don't, you can dismiss this step.</p>
<h3 id="installing-chrome-driver">Installing Chrome driver <a class="anchor" href="#installing-chrome-driver" aria-hidden="true"></a></h3>
<p>Some websites rendering requires JavaScript. Our crawler rely on a headless
chrome emulation. You will need to set up a ChromeDriver.</p>
<ul>
<li><a href="http://chromedriver.chromium.org/getting-started">Install the driver</a> suited to your OS and the version of your Chrome. We
do recommend to use the latest version.</li>
<li>Set the environment variable <code>CHROMEDRIVER_PATH</code> in your <code>.env</code> file. This
path must target the downloaded extracted driver.</li>
</ul>
<p>You are ready to go.</p>
<h3 id="running-the-crawler">Running the crawler <a class="anchor" href="#running-the-crawler" aria-hidden="true"></a></h3>
<p>Running <code>pipenv shell</code> will enable your virtual environment. From there, you can
run one crawl with the following command:</p>
<pre><code class="hljs language-sh">$ ./docsearch run /path/to/your/config.json
</code></pre>
<p>Or from the Docker image:</p>
<pre><code class="hljs language-sh">$ ./docsearch docker:run /path/to/your/config.json
</code></pre>
<p>This will start the crawl. It extracts content from parsed pages and push the
built records to Algolia.</p>
<h2 id="create-a-new-configuration">Create a new configuration <a class="anchor" href="#create-a-new-configuration" aria-hidden="true"></a></h2>
<p>To create a configuration, run <code>./docsearch bootstrap</code>. A prompt will ask you
for some information and will create a JSON configuration you can use as a base.</p>
<pre><code class="hljs language-sh">$ ./docsearch bootstrap
<span class="hljs-comment"># Enter your documentation url</span>
start url: http://www.example.com/docs/
<span class="hljs-comment"># Pick another name, or press enter</span>
index_name is example [enter to confirm]: &lt;Enter&gt;

=================
{
  <span class="hljs-string">"index_name"</span>: <span class="hljs-string">"example"</span>,
  <span class="hljs-string">"start_urls"</span>: [
    <span class="hljs-string">"http://www.example.com/docs/"</span>
  ],
  <span class="hljs-string">"stop_urls"</span>: [],
  <span class="hljs-string">"selectors"</span>: {
    <span class="hljs-string">"lvl0"</span>: <span class="hljs-string">"FIXME h1"</span>,
    <span class="hljs-string">"lvl1"</span>: <span class="hljs-string">"FIXME h2"</span>,
    <span class="hljs-string">"lvl2"</span>: <span class="hljs-string">"FIXME h3"</span>,
    <span class="hljs-string">"lvl3"</span>: <span class="hljs-string">"FIXME h4"</span>,
    <span class="hljs-string">"lvl4"</span>: <span class="hljs-string">"FIXME h5"</span>,
    <span class="hljs-string">"lvl5"</span>: <span class="hljs-string">"FIXME h6"</span>,
    <span class="hljs-string">"text"</span>: <span class="hljs-string">"FIXME p, FIXME li"</span>
  }
}
=================
</code></pre>
<p>Create a file from this text into a filename <code>example.json</code>, we'll use it later
on to start the crawl. You can browse the <a href="https://github.com/algolia/docsearch-configs/tree/master/configs">list of live configurations</a>.</p>
<h2 id="testing-your-results">Testing your results <a class="anchor" href="#testing-your-results" aria-hidden="true"></a></h2>
<p>You can test your results by running <code>./docsearch playground</code>. This will open a
web page with a search input. You can do live tests against the indexed results.</p>
<p class="mt-2"><img src="./assets/playground.png" alt="Playground"></p>
<p><em>Note that if the command fails (it can happen on non-Mac machines), you can get
the same result by running a live server in the <code>./playground</code> subdirectory.`</em></p>
<h2 id="integration">Integration <a class="anchor" href="#integration" aria-hidden="true"></a></h2>
<p>Once you're satisfied with your config, you can integrate the dropdown menu in
your website by following the <a href="./dropdown.html">instructions here</a>.</p>
<p>The difference is that you'll also have to add the <code>appId</code> key to your
<code>docsearch()</code> instance. Also don't forget to use a <strong>search</strong> API key here (in
other words, not the <strong>write</strong> API key you used for the crawl).</p>
<pre><code class="hljs language-javascript">docsearch({
  <span class="hljs-attr">appId</span>: <span class="hljs-string">'&lt;APP_ID&gt;'</span>, <span class="hljs-comment">// Add your own Application ID</span>
  apiKey: <span class="hljs-string">'&lt;API_KEY&gt;'</span>, <span class="hljs-comment">// Set it to your own *search* API key</span>
  […] <span class="hljs-comment">// Other parameters are the same</span>
});
</code></pre>
<h2 id="help">Help <a class="anchor" href="#help" aria-hidden="true"></a></h2>
<p>You can run <code>./docsearch</code> without any argument to see the list of all available
commands.</p>
<p><em>Note that we use this command-line tool internally at Algolia to run the free
hosted version, so you might not need all the listed commands.</em></p>
<!-- Include the apply form--><div class="my-3 italic"><a href="https://github.com/algolia/docsearch/tree/master/docs/src/run-your-own.md">Edit this page</a></div></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="js/main.js"></script><script src="js/docs.js"></script></body><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-N8JP8G');</script></head></html>